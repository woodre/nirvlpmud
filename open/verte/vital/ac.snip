void
add_channel(string channel_name, object player)
{
  object *players;
  
  if(!ChannelsMap)
    ChannelsMap = ([ ]);
  
  if(!(players = ChannelsMap[channel_name]))
  {
    ChannelsMap[channel_name] = ({ player });
  }
  else
  {
    int i;
    if(member_array(player, players) < 0)
    {
      if((i = member_array(0, players)) < 0)
      {
        ChannelsMap[channel_name] += ({ player });
      }
      else
      {
        ChannelsMap[channel_name][i] = player;
      }
    }
  }
}

#include <ansi.h>
#include "/obj/lib/living/settings.h"

#define TP this_player()

int cmd_score()
{
  int intox_level;
  string tmp;
  int tmpp, ex_lv;
  int infuse, level;
    
  if (this_player()->query_ghost())
  {
    write("You are in an immaterial state with no scores.\n");
	  return 1;
  }
  this_player()->transfer_extra_eq();
  write("\n");
  
  write(TP->short()+"\n");
  ex_lv=(int)TP->query_extra_level();
  write("Level: "+(int)TP->query_level()+" "+
   (ex_lv ? 
    (ex_lv+" ("+TP->query_total_level()+")\n") : "\n"));
 
  write("Coins: "+(int)TP->query_money()
  +"          \t\tExperience: "+(int)TP->query_exp()+"\n");
  
  write("Hit points: "+(int)TP->query_hp()+"/"+(int)TP->query_mhp()+"     ");
  write("\t");
  write("Spell points: "+(int)TP->query_sp()+"/"+(int)TP->query_msp()+"\n");
  write("Quest points: "+(int)TP->query_quest_point()+"\t\t");
  
  infuse = (int)TP->query_infuse();
  level = (int)TP->query_level();
  
  if(infuse > 0)
    write("Infused: "+(2*infuse/3)+"/"+(2*(INFUSE_LIMIT)/3)+"\n");
  else write("\n");
  if (((int)TP->query_level() > 19) || (TP->is_testchar()))
    if ((int)TP->query_bank_balance())
      write("Bank Balance: " + TP->query_bank_balance() + "\n");
  TP->show_age();
  
  if(TP->query_tellblock_index(0) && 
     (string)TP->query_tellblock_index(0) != "off") write("Tellblock is ON.\n");
     
  if(TP->query_pregnancy())
  {
    tmpp=(int)TP->query_age()-(int)TP->query_pregnancy();
    if(tmpp > 4000) 
      write("You are Pregnant ("+tmpp+" / 16200)\n");
  }
  
  if(TP->query_hunter() && TP->query_hunter()->query_name())
    write("You are hunted by "+(string)TP->query_hunter()->query_name()+ ".\n");
    
  if (!TP->query_intoxination())
    write("You are sober.\n");
  else
  {
    intox_level=level+4;
    intox_level/=(int)TP->query_intoxination();
    if (intox_level == 0)
      write("You are in a drunken stupor.\n");
    else if (intox_level == 1)
      write("You are roaring drunk.\n");
    else if (intox_level == 2)
      write("You are somewhat drunk.\n");
    else if (intox_level == 3)
      write("You are quite tipsy.\n");
    else
      write("You are slightly tipsy.\n");
  }
  if (TP->query_stuffed() || TP->query_soaked()) {
	  write("You are ");
    if (TP->query_stuffed())
      write("satiated"+(TP->query_soaked() ? " and " : ".\n"));
	  if (TP->query_soaked()) write("not thirsty.\n");
  }

  if (TP->query_whimpy())
	  write("Wimpy mode.\n");
	  
	if(TP->check_fight_area()) write("You are in a "+HIR+"PK"+NORM+" zone.\n");
  write("Carrying "+(int)TP->query_pct_weight()+"% of maximum capacity.\n");
  write("\n");
  return 1;
}

/*
 * This file contains some functions used by the Mage Staff
 * These are NOT guild spells that players can just cast
 * Mage Staff = /players/pavlik/guild/mages/obj/mage_staff.c
 *
 */
create_mage_staff() {

  if(tp->query_guild_rank() < 34) {
	write("What?\n");
	return 1;
  }

  if(!env->query_mguild()) {
	write("You must be within the Mages Tower first.\n");
	return 1;
  }

  if(tp->query_sp() < 240) {
	write("You are too tired to create a Mage Staff right now.\n");
	return 1;
  }

  if(present("mage staff", tp)) {
	write("You already have a mage staff.\n");
	return 1;
  }

  write(
    "You collect your thoughts and with an amazing focus of magic you\n"+
    "create an enchanted staff of dragon wood from thin air!\n");
  tell_room(env,
    "The air crackles with the power of magic and a Mage Staff appears\n"+
    "at "+ME+"'s feet!\n");

  move_object(clone_object("players/pavlik/guild/mages/obj/mage_staff"), env);
  tp->add_spell_point(-250);
  return 1;
}

staff_help() {
  write(
  "Mage Staff Powers:\n"+
  "  staff add <spell>      - Add spell to the autolist\n"+
  "  staff remove <spell>   - Remove spell from autolist\n"+
  "  staff list             - Show spells currently in autolist\n"+
  "  staff clear            - Clear all spells from autolist\n"+
  "  staff renew            - Recover saved autlist\n"+
  "  staff save             - Save autolist\n"+
  "  staff autocast <on/off> - Toggle Autocasting\n"+
  "  staff freq <#>         - Set casting Frequency\n"+
  "  staff order            - Toggles casting order [random or consecutive]\n"+
  "  staff help             - This menu\n"+
  "\n");
  return 1;
}

staff_hit(obj) {

  int x;
  x = random(10);

  if(x == 0) {
	write("You crack "+IT+" across the back with your staff!\n");
	say(ME+" cracks "+IT+" across the back with the magic staff!\n");
  }
  else if(x == 1) {
	write("A "+HIB+"bolt of lightning"+NORM+" emerges from your staff and strikes "+IT+"!\n");
	say("A "+HIB+"bolt of lightning"+NORM+" emerges from "+ME+"'s staff and strikes "+IT+"!\n");
	if(obj) obj->hit_player(5+random(5), "other|electric");
  }
  else if(x == 2) {
	write("Your staff "+HIY+"shines brilliantly"+NORM+" with magic power!\n");
	say(ME+"'s staff "+HIY+"shines brilliantly"+NORM+" with magic power!\n");
	if(obj) obj->hit_player(5+random(5), "magical");
  }
  else if(x == 4) {
	write("You slam your staff into your enemy's stomach!\n");
	say(ME+" slams the magic staff into "+IT+"'s stomach!\n");
  }
  else if(x == 6) {
	write(HIR+"Searing Flames"+NORM+" shoot from your staff and burn "+IT+"!\n");
	say(HIR+"Searing Flames"+NORM+" shoot from "+ME+"'s staff and burn "+IT+"!\n");
	obj->hit_player(5+random(5), "other|fire");
  }
  else if(x == 7) {
	write("Your dragon wood staff glows with the power of magic.\n");
  }
  else if(x == 8) {
	write("You "+HIG+"BASH"+NORM+" "+IT+" in the head!\n");
	say(ME+" "+HIG+"BASHES"+NORM+" "+IT+" in the head!\n");
  }

}

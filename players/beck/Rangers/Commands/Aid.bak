#include "/players/beck/Defs.h"
#include "/players/beck/Rangers/RangerDefs.h"

RangerPower(str, string type){
   int cost;
   object attack;
   cost = 20;
   if(!str){
      write("You must specify a "+type+" to aid.\n");
      return 1;
   }
   if(str == TPRNAME){ 
      write("You do not need to aid yourself.\n");
      return 1;
   }
   if(str == "command center"){
   }
   else if(!find_living(str)){
      write(capitalize(str)+" is not around\n");
      return 1;
   }
   else if(type == "Power Ranger" && find_living(str)->query_guild_name() != "rangers"){
      write("Zordon tells you: "+capitalize(str)+" is not a Power Ranger\n");
      return 1;
   }
   else if(type == "Dark Ranger" && find_living(str)->query_guild_name() != "dark rangers"){
      write("Lord Zed tells you: "+capitalize(str)+" is not a Dark Ranger\n");
      return 1;
   }

   if(!find_living(str)->query_attack()){
      write(capitalize(str)+" is not in battle.\n");
      return 1;
   }
   if(!present(str, ENVTP)){
      command("teleport "+str,TP);
   }
   if(cost > MASTER->QPowerPoints(type)){
      write("There is not enough Power.\n");
      return 1;
   }
   if(!present(str, ENVTP)) return;
   attack = present(str,ENVTP)->query_attack();
   if(!TP->valid_attack(attack)){
      write("You cannot attack that person.\n");
      return 1;
   }
   TP->attack_object(attack);
   MASTER->APowerPoints(-cost,type);
   return 1;
}

QRangerInfo(){ return 1; }

RangerInfo(){
   write("Aid is a team skill to allow you to quickly fight with other rangers.\n"+
         "When you use aid you will automatically fight the monster your team member\n"+
         "is fighting, and if necessary you will teleport to them.\n"+
         "Commands:\n\n"+
         "aid <team member> - Helps another Power Ranger in battle\n"+
         "");
   return 1;
}

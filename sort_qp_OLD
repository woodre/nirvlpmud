#!/bin/sh
cd pfiles
echo ""
echo 'List of top players ' `date`
echo ""
echo "Name      QP Lev"
echo ""
egrep '^quest_point |^cap_name |^level ' */*.o |\
sed -e 's/\.o:/ /' -e 's/\"//g' |\
sort |\
awk '
$2=="cap_name" { jump = $1; }
$2=="level" { level = $3; }
$2=="quest_point" { if ($3 > 100) if(level < 20) printf("%-10s %2d %d\n", jump, $3, level);
	    level = 0; jump = "XX"; }' |\
sort +1rn +2rn |\
head -100

#!/bin/sh
cd players
echo ""
echo 'List of top players ' `date`
echo ""
echo "Name      Lev Hours"
echo ""
egrep '^level |^cap_name |^age ' *.o |\
sed -e 's/\.o:/ /' -e 's/\"//g' |\
sort |\
awk '
$2=="cap_name" { jump = $1; }
$2=="age" { age = $3; }
$2=="level" { if ($3 > 19) printf("%-10s %2d %d\n", jump, $3, age/30/60);
	    age = 0; jump = "XX"; }' |\
sort +rn1 +rn2 |\
head -100
